Groq library not found. AI features will be disabled.
Found 11 test(s).
Creating test database for alias 'default' ('file:memorydb_default?mode=memory&cache=shared')...
Operations to perform:
  Synchronize unmigrated apps: corsheaders, messages, rest_framework, staticfiles
  Apply all migrations: admin, auth, authtoken, contenttypes, game_engine, sessions
Synchronizing apps without migrations:
  Creating tables...
    Running deferred SQL...
Running migrations:
  Applying contenttypes.0001_initial... OK
  Applying auth.0001_initial... OK
  Applying admin.0001_initial... OK
  Applying admin.0002_logentry_remove_auto_add... OK
  Applying admin.0003_logentry_add_action_flag_choices... OK
  Applying contenttypes.0002_remove_content_type_name... OK
  Applying auth.0002_alter_permission_name_max_length... OK
  Applying auth.0003_alter_user_email_max_length... OK
  Applying auth.0004_alter_user_username_opts... OK
  Applying auth.0005_alter_user_last_login_null... OK
  Applying auth.0006_require_contenttypes_0002... OK
  Applying auth.0007_alter_validators_add_error_messages... OK
  Applying auth.0008_alter_user_username_max_length... OK
  Applying auth.0009_alter_user_last_name_max_length... OK
  Applying auth.0010_alter_group_name_max_length... OK
  Applying auth.0011_update_proxy_permissions... OK
  Applying auth.0012_alter_user_first_name_max_length... OK
  Applying authtoken.0001_initial... OK
  Applying authtoken.0002_auto_20160226_1747... OK
  Applying authtoken.0003_tokenproxy... OK
  Applying authtoken.0004_alter_tokenproxy_options... OK
  Applying game_engine.0001_initial... OK
  Applying game_engine.0002_add_lifelines... OK
  Applying game_engine.0003_add_card_translations... OK
  Applying game_engine.0004_gamesession_stock_investment... OK
  Applying game_engine.0005_evolution_features... OK
  Applying game_engine.0006_alter_playerchoice_choice... OK
  Applying game_engine.0007_gamesession_market_trends... OK
  Applying game_engine.0008_add_profile_stats... OK
  Applying game_engine.0009_gamesession_purchase_history... OK
  Applying game_engine.0010_futurescontract_stockhistory... OK
  Applying game_engine.0011_recurringexpense_category_and_more... OK
  Applying game_engine.0012_choice_feedback_hi_choice_feedback_mr_choice_text_hi_and_more... OK
  Applying game_engine.0013_gamesession_current_level_gamesession_final_report_and_more... OK
  Applying game_engine.0014_scenariocard_is_generated... OK
  Applying game_engine.0015_gamesession_active_ipos_gamesession_mutual_funds... OK
  Applying game_engine.0016_markettickerdata... OK
  Applying sessions.0001_initial... OK
System check identified no issues (0 silenced).
test_start_game_creates_guest_user (game_engine.tests.StartGameAPITests.test_start_game_creates_guest_user)
Test that start_game creates a unique guest user. ... C:\Users\ASUS\AppData\Local\Programs\Python\Python312\Lib\site-packages\django\core\handlers\base.py:62: UserWarning: No directory at: C:\Users\ASUS\Downloads\vs code\.vscode\Arth-Neeti\arth-neeti-game\backend\staticfiles\
  mw_instance = middleware(adapted_handler)
FAIL
test_start_game_creates_unique_sessions (game_engine.tests.StartGameAPITests.test_start_game_creates_unique_sessions)
Test that each start_game call creates a unique session. ... FAIL
test_start_game_initial_values (game_engine.tests.StartGameAPITests.test_start_game_initial_values)
Test that new game has correct initial values. ... ERROR
test_bankruptcy_ends_game (game_engine.tests.SubmitChoiceAPITests.test_bankruptcy_ends_game)
Test that wealth <= 0 triggers game over. ... ERROR
test_happiness_clamped_to_bounds (game_engine.tests.SubmitChoiceAPITests.test_happiness_clamped_to_bounds)
Test that happiness is clamped between 0 and 100. ... ERROR
test_submit_choice_logs_player_choice (game_engine.tests.SubmitChoiceAPITests.test_submit_choice_logs_player_choice)
Test that player choice is logged. ... FAIL
test_submit_choice_updates_stats (game_engine.tests.SubmitChoiceAPITests.test_submit_choice_updates_stats)
Test that submitting a choice updates session stats correctly. ... FAIL
test_game_completes_at_month_12 (game_engine.tests.GameProgressionTests.test_game_completes_at_month_12)
Test that game ends after 12 months (new 1-year game logic). ... FAIL
test_month_advances_every_3_choices (game_engine.tests.GameProgressionTests.test_month_advances_every_3_choices)
Test that month advances after every 3 choices (new logic). ... FAIL
test_submit_choice_mismatch (game_engine.tests_new_features.ValidationTests.test_submit_choice_mismatch)
Test submitting a choice that belongs to a different card. ... FAIL
test_submit_valid_choice (game_engine.tests_new_features.ValidationTests.test_submit_valid_choice) ... FAIL

======================================================================
ERROR: test_start_game_initial_values (game_engine.tests.StartGameAPITests.test_start_game_initial_values)
Test that new game has correct initial values.
----------------------------------------------------------------------
Traceback (most recent call last):
  File "C:\Users\ASUS\Downloads\vs code\.vscode\Arth-Neeti\arth-neeti-game\backend\game_engine\tests.py", line 108, in test_start_game_initial_values
    session_data = response.data['session']
                   ~~~~~~~~~~~~~^^^^^^^^^^^
KeyError: 'session'

======================================================================
ERROR: test_bankruptcy_ends_game (game_engine.tests.SubmitChoiceAPITests.test_bankruptcy_ends_game)
Test that wealth <= 0 triggers game over.
----------------------------------------------------------------------
Traceback (most recent call last):
  File "C:\Users\ASUS\Downloads\vs code\.vscode\Arth-Neeti\arth-neeti-game\backend\game_engine\tests.py", line 216, in test_bankruptcy_ends_game
    self.assertTrue(response.data['game_over'])
                    ~~~~~~~~~~~~~^^^^^^^^^^^^^
KeyError: 'game_over'

======================================================================
ERROR: test_happiness_clamped_to_bounds (game_engine.tests.SubmitChoiceAPITests.test_happiness_clamped_to_bounds)
Test that happiness is clamped between 0 and 100.
----------------------------------------------------------------------
Traceback (most recent call last):
  File "C:\Users\ASUS\Downloads\vs code\.vscode\Arth-Neeti\arth-neeti-game\backend\game_engine\tests.py", line 202, in test_happiness_clamped_to_bounds
    self.assertLessEqual(response.data['session']['happiness'], 100)
                         ~~~~~~~~~~~~~^^^^^^^^^^^
KeyError: 'session'

======================================================================
FAIL: test_start_game_creates_guest_user (game_engine.tests.StartGameAPITests.test_start_game_creates_guest_user)
Test that start_game creates a unique guest user.
----------------------------------------------------------------------
Traceback (most recent call last):
  File "C:\Users\ASUS\Downloads\vs code\.vscode\Arth-Neeti\arth-neeti-game\backend\game_engine\tests.py", line 99, in test_start_game_creates_guest_user
    self.assertEqual(response.status_code, status.HTTP_201_CREATED)
AssertionError: 401 != 201

======================================================================
FAIL: test_start_game_creates_unique_sessions (game_engine.tests.StartGameAPITests.test_start_game_creates_unique_sessions)
Test that each start_game call creates a unique session.
----------------------------------------------------------------------
Traceback (most recent call last):
  File "C:\Users\ASUS\Downloads\vs code\.vscode\Arth-Neeti\arth-neeti-game\backend\game_engine\tests.py", line 86, in test_start_game_creates_unique_sessions
    self.assertEqual(response1.status_code, status.HTTP_201_CREATED)
AssertionError: 401 != 201

======================================================================
FAIL: test_submit_choice_logs_player_choice (game_engine.tests.SubmitChoiceAPITests.test_submit_choice_logs_player_choice)
Test that player choice is logged.
----------------------------------------------------------------------
Traceback (most recent call last):
  File "C:\Users\ASUS\Downloads\vs code\.vscode\Arth-Neeti\arth-neeti-game\backend\game_engine\tests.py", line 183, in test_submit_choice_logs_player_choice
    self.assertEqual(player_choices.count(), 1)
AssertionError: 0 != 1

======================================================================
FAIL: test_submit_choice_updates_stats (game_engine.tests.SubmitChoiceAPITests.test_submit_choice_updates_stats)
Test that submitting a choice updates session stats correctly.
----------------------------------------------------------------------
Traceback (most recent call last):
  File "C:\Users\ASUS\Downloads\vs code\.vscode\Arth-Neeti\arth-neeti-game\backend\game_engine\tests.py", line 167, in test_submit_choice_updates_stats
    self.assertEqual(response.status_code, status.HTTP_200_OK)
AssertionError: 401 != 200

======================================================================
FAIL: test_game_completes_at_month_12 (game_engine.tests.GameProgressionTests.test_game_completes_at_month_12)
Test that game ends after 12 months (new 1-year game logic).
----------------------------------------------------------------------
Traceback (most recent call last):
  File "C:\Users\ASUS\Downloads\vs code\.vscode\Arth-Neeti\arth-neeti-game\backend\game_engine\tests.py", line 307, in test_game_completes_at_month_12
    self.assertTrue(game_over)
AssertionError: False is not true

======================================================================
FAIL: test_month_advances_every_3_choices (game_engine.tests.GameProgressionTests.test_month_advances_every_3_choices)
Test that month advances after every 3 choices (new logic).
----------------------------------------------------------------------
Traceback (most recent call last):
  File "C:\Users\ASUS\Downloads\vs code\.vscode\Arth-Neeti\arth-neeti-game\backend\game_engine\tests.py", line 268, in test_month_advances_every_3_choices
    self.assertEqual(session.current_month, 2)  # (3 // 3) + 1 = 2
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AssertionError: 1 != 2

======================================================================
FAIL: test_submit_choice_mismatch (game_engine.tests_new_features.ValidationTests.test_submit_choice_mismatch)
Test submitting a choice that belongs to a different card.
----------------------------------------------------------------------
Traceback (most recent call last):
  File "C:\Users\ASUS\Downloads\vs code\.vscode\Arth-Neeti\arth-neeti-game\backend\game_engine\tests_new_features.py", line 108, in test_submit_choice_mismatch
    self.assertEqual(res.status_code, 400)
AssertionError: 401 != 400

======================================================================
FAIL: test_submit_valid_choice (game_engine.tests_new_features.ValidationTests.test_submit_valid_choice)
----------------------------------------------------------------------
Traceback (most recent call last):
  File "C:\Users\ASUS\Downloads\vs code\.vscode\Arth-Neeti\arth-neeti-game\backend\game_engine\tests_new_features.py", line 98, in test_submit_valid_choice
    self.assertEqual(res.status_code, 200)
AssertionError: 401 != 200

----------------------------------------------------------------------
Ran 11 tests in 9.998s

FAILED (failures=8, errors=3)
Destroying test database for alias 'default' ('file:memorydb_default?mode=memory&cache=shared')...

There were 11 failures.